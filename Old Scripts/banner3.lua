CREATETIME="2017-09-10 05:45:40";

adaptResolution(640, 1136);
adaptOrientation(ORIENTATION_TYPE.PORTRAIT);

-- [Basic Functions]

bosscount = 0;

-- [Import from Other Code]
function luaImport()
	touchDown(9, 144.83, 620.04);
	usleep(16468.58);
	touchMove(9, 139.76, 636.24);
	usleep(16483.92);
	touchMove(9, 138.74, 656.51);
	usleep(16744.08);
	touchMove(9, 134.67, 673.74);
	usleep(16511.71);
	touchMove(9, 130.61, 687.92);
	usleep(16661.58);
	touchMove(9, 127.56, 701.09);
	usleep(16828.75);
	touchMove(9, 124.51, 713.24);
	usleep(16475.25);
	touchMove(9, 122.48, 724.39);
	usleep(16616.21);
	touchMove(9, 120.45, 735.53);
	usleep(16913.29);
	touchMove(9, 118.42, 746.68);
	usleep(16616.88);
	touchMove(9, 117.40, 757.82);
	usleep(16588.21);
	touchMove(9, 114.36, 768.97);
	usleep(16734.08);
	touchMove(9, 112.32, 779.09);
	usleep(16577.96);
	touchMove(9, 109.27, 786.20);
	usleep(16686.83);
	touchMove(9, 108.25, 793.29);
	usleep(16809.33);
	touchMove(9, 106.22, 799.36);
	usleep(16491.67);
	touchMove(9, 104.19, 804.44);
	usleep(16774.08);
	touchMove(9, 103.17, 809.50);
	usleep(16779.00);
	touchMove(9, 102.16, 813.55);
	usleep(16561.79);
	touchMove(9, 102.16, 816.59);
	usleep(16638.17);
	touchMove(9, 102.16, 819.62);
	usleep(16789.25);
	touchMove(9, 101.14, 820.64);
	usleep(16566.04);
	touchMove(9, 101.14, 821.65);
	usleep(16636.08);
	touchMove(9, 101.14, 822.67);
	usleep(50081.12);
	touchMove(9, 100.13, 822.67);
	usleep(133380.67);
	touchMove(9, 100.13, 823.68);
	usleep(16565.92);
	touchMove(9, 100.13, 824.70);
	usleep(16885.54);
	touchMove(9, 100.13, 825.70);
	usleep(16499.25);
	touchMove(9, 98.10, 826.73);
	usleep(16808.50);
	touchMove(9, 97.08, 827.73);
	usleep(16599.88);
	touchMove(9, 94.03, 828.74);
	usleep(16628.79);
	touchMove(9, 92.00, 830.77);
	usleep(16616.96);
	touchMove(9, 89.97, 831.79);
	usleep(16831.62);
	touchMove(9, 87.94, 832.79);
	usleep(16703.96);
	touchMove(9, 84.88, 832.79);
	usleep(16661.88);
	touchMove(9, 81.84, 832.79);
	usleep(16574.50);
	touchMove(9, 77.77, 832.79);
	usleep(16628.58);
	touchMove(9, 71.68, 831.79);
	usleep(16748.62);
	touchMove(9, 67.62, 826.73);
	usleep(16620.12);
	touchMove(9, 61.52, 821.65);
	usleep(16681.88);
	touchMove(9, 58.47, 817.59);
	usleep(16526.17);
	touchMove(9, 54.40, 814.56);
	usleep(16941.46);
	touchMove(9, 52.37, 811.53);
	usleep(16642.88);
	touchMove(9, 51.36, 810.50);
	usleep(16631.54);
	touchMove(9, 50.34, 809.50);
	usleep(249827.08);
	touchMove(9, 50.34, 810.50);
	usleep(16730.25);
	touchMove(9, 52.37, 814.56);
	usleep(16516.42);
	touchMove(9, 61.52, 825.70);
	usleep(16707.04);
	touchMove(9, 76.76, 840.91);
	usleep(16848.54);
	touchMove(9, 90.99, 850.02);
	usleep(16475.12);
	touchMove(9, 106.22, 860.15);
	usleep(16692.08);
	touchMove(9, 122.48, 869.26);
	usleep(16783.00);
	touchMove(9, 140.77, 876.35);
	usleep(16622.29);
	touchMove(9, 164.13, 881.43);
	usleep(16653.29);
	touchMove(9, 181.41, 884.47);
	usleep(16760.62);
	touchMove(9, 195.63, 886.49);
	usleep(16620.50);
	touchMove(9, 210.87, 887.50);
	usleep(16574.75);
	touchMove(9, 224.08, 887.50);
	usleep(16849.50);
	touchMove(9, 238.30, 887.50);
	usleep(16496.79);
	touchMove(9, 248.47, 883.46);
	usleep(16720.04);
	touchMove(9, 257.61, 878.38);
	usleep(16740.75);
	touchMove(9, 264.72, 874.34);
	usleep(16570.38);
	touchMove(9, 269.79, 871.29);
	usleep(16645.25);
	touchMove(9, 272.85, 870.29);
	usleep(16810.75);
	touchMove(9, 274.88, 870.29);
	usleep(16604.33);
	touchMove(9, 275.90, 870.29);
	usleep(83433.46);
	touchMove(9, 275.90, 869.26);
	usleep(16588.17);
	touchMove(9, 275.90, 868.26);
	usleep(16651.62);
	touchMove(9, 275.90, 866.23);
	usleep(16761.29);
	touchMove(9, 275.90, 863.20);
	usleep(16613.67);
	touchMove(9, 275.90, 860.15);
	usleep(17523.92);
	touchMove(9, 276.91, 855.09);
	usleep(15917.75);
	touchMove(9, 277.93, 849.00);
	usleep(16630.58);
	touchMove(9, 280.98, 840.91);
	usleep(16597.79);
	touchMove(9, 288.09, 830.77);
	usleep(16807.00);
	touchMove(9, 294.18, 822.67);
	usleep(16528.42);
	touchMove(9, 299.27, 813.55);
	usleep(16670.88);
	touchMove(9, 305.36, 806.46);
	usleep(16754.75);
	touchMove(9, 308.41, 801.38);
	usleep(16618.08);
	touchMove(9, 311.46, 798.35);
	usleep(16653.83);
	touchMove(9, 313.49, 796.32);
	usleep(16860.21);
	touchMove(9, 314.50, 794.30);
	usleep(16477.17);
	touchMove(9, 315.52, 791.26);
	usleep(16663.54);
	touchMove(9, 316.53, 786.20);
	usleep(16826.33);
	touchMove(9, 319.58, 780.12);
	usleep(16719.08);
	touchMove(9, 322.63, 773.03);
	usleep(16368.54);
	touchMove(9, 326.70, 763.91);
	usleep(16853.92);
	touchMove(9, 331.78, 755.80);
	usleep(16538.58);
	touchMove(9, 337.87, 750.73);
	usleep(16588.33);
	touchMove(9, 342.95, 747.70);
	usleep(16810.17);
	touchMove(9, 347.01, 746.68);
	usleep(16657.67);
	touchMove(9, 350.07, 746.68);
	usleep(16578.50);
	touchMove(9, 352.10, 746.68);
	usleep(16798.25);
	touchMove(9, 353.12, 746.68);
	usleep(16517.38);
	touchMove(9, 354.13, 746.68);
	usleep(83609.50);
	touchMove(9, 351.08, 746.68);
	usleep(16601.62);
	touchMove(9, 348.03, 745.67);
	usleep(16780.88);
	touchMove(9, 347.01, 742.62);
	usleep(16737.00);
	touchMove(9, 344.98, 740.59);
	usleep(16530.79);
	touchMove(9, 344.98, 738.57);
	usleep(16528.33);
	touchMove(9, 344.98, 737.56);
	usleep(116660.04);
	touchMove(9, 346.00, 735.53);
	usleep(16478.79);
	touchMove(9, 347.01, 733.50);
	usleep(16651.50);
	touchMove(9, 349.04, 730.47);
	usleep(16891.79);
	touchMove(9, 352.10, 726.42);
	usleep(16614.29);
	touchMove(9, 357.18, 722.36);
	usleep(16722.29);
	touchMove(9, 364.29, 719.33);
	usleep(16674.50);
	touchMove(9, 371.40, 716.29);
	usleep(16599.92);
	touchMove(9, 377.50, 714.26);
	usleep(16672.75);
	touchMove(9, 383.59, 713.24);
	usleep(16774.92);
	touchMove(9, 387.66, 713.24);
	usleep(16545.04);
	touchMove(9, 389.69, 713.24);
	usleep(16847.83);
	touchMove(9, 392.73, 713.24);
	usleep(16674.96);
	touchMove(9, 393.75, 713.24);
	usleep(16561.21);
	touchMove(9, 395.78, 714.26);
	usleep(16684.46);
	touchUp(9, 404.93, 722.36);
	usleep(3233814.71);

	touchDown(8, 184.45, 56.73);
	usleep(16786.38);
	touchMove(8, 198.68, 72.94);
	usleep(16438.54);
	touchMove(8, 236.27, 94.21);
	usleep(16941.25);
	touchMove(8, 290.12, 118.53);
	usleep(16674.25);
	touchMove(8, 369.37, 151.97);
	usleep(16724.96);
	touchMove(8, 459.79, 182.35);
	usleep(16612.25);
	touchUp(8, 465.89, 166.15);
	usleep(766294.17);

	touchDown(7, 153.97, 63.82);
	usleep(16693.58);
	touchMove(7, 161.08, 75.97);
	usleep(16865.17);
	touchMove(7, 190.55, 100.29);
	usleep(16607.58);
	touchMove(7, 254.56, 132.71);
	usleep(16665.17);
	touchMove(7, 334.82, 163.11);
	usleep(16831.46);
	touchMove(7, 450.64, 195.53);
	usleep(16539.67);
	touchMove(7, 492.30, 192.49);
	usleep(16388.25);
	touchUp(7, 496.37, 188.44);
	usleep(2750681.46);

	touchDown(3, 485.20, 1092.16);
	usleep(116297.71);
	touchUp(3, 485.20, 1092.16);
end

-- Tap Spot
function tap(x, y)
	touchDown(0, x, y);
	usleep(16000);
	touchUp(0, x, y);
	usleep(500000);
end

-- Wait for color at spot
function waitcheck(x, y, color)
	local result = getColor(x, y);
	repeat
		usleep(1000000);
		result = getColor(x, y);
	until (result == color);
	usleep(math.random(500000,2000000))
end

-- Swipe Medal
function swipeMedal()
	touchDown(0, 170, 78);
	usleep(16000);
	touchMove(0, 281, 190);
	usleep(16000);
	touchUp(0, 281, 190);
end

-- Swipe Down for Rewards screen
function swipeDown()
	touchDown(0, 400, 237);
	usleep(16000);
	touchMove(0, 200, 237);
	usleep(16000);
	touchUp(0, 200, 237);
end

-- [Action Functions]

-- -- [Find Boss Banner]
function GoToBossQuest()
	local banner1 = (430);
	local banner2 = (258);
	local banner3 = (86);

	waitcheck(470, 1030, 16772608);
	tap(470, 1030);
	waitcheck(445, 92, 533072);
	tap(banner3, 568);
end

-- -- [Start Quest]
function beginQuest()
	waitcheck(231, 644, 11998253);
	tap(225, 770);
	waitcheck(46, 510, 11998253);
	tap(35, 550);
	tap(35, 550);
end

-- -- [Boss Quest Action]

function bossQuestAction();
	waitcheck(29, 1059, 6815743);
	-- other shit
	luaImport(); -- bring code from self run
	-- Check if the quest has ended
	waitcheck(486, 227, 14913807); -- screen orange
	usleep(math.random(500000,2000000));
	tap (68, 570);
	usleep(math.random(500000,2000000));
	tap (68, 570); -- tap screen for Rewards
	usleep(math.random(1000000,2000000));
	swipeDown(); -- speed up Rewards
	waitcheck(486, 227, 14913807); -- check for red button
	usleep(math.random(500000,2000000));
	tap (68 ,570); -- tap red button
	-- [ ONLY FOR SURE SUMMONS ]
	waitcheck(382, 238, 16752201); -- check for encounter
	usleep(math.random(500000,2000000));
	tap (68, 570); -- tap screen to continue
end

-- -- [Fight Boss Loop]
function startBoss()
	waitcheck(29, 1059, 6815743);
	tap(37, 325);
end

-- -- [End Boss]
function endBoss()
	--alert(string.format("Boss is dead %d", check));
	tap (68, 570);
	usleep(16000);
	tap (68, 570);
	waitcheck(486, 227, 14913807);
	usleep(2000000);
	tap (68, 570);
	waitcheck(486, 227, 14913807);
	tap (68 ,570);
	bosscount = bosscount + 1;
	log(string.format("Dead Boss Total:%d", bosscount));
	waitcheck(55, 510, 11998253);
	usleep(math.random(500000,1500000));
	tap(68, 570);
end

-- [Check if Boss is Dead]
function deadBossCheck()
	local check = getColor(382, 238);
	local success = 16755277;
	local defeated = 4662623;
	if (check ~= defeated and check ~= success) then
		repeat
			usleep(1000000);
			check = getColor(382, 238);
		until (check == defeated or check == success);
	elseif (check == defeated) then
		repeat
			tap (68, 570);
			beginQuest();
			startBoss();
			if (check ~= defeated or check ~= success) then
				repeat
					usleep(1000000);
					check = getColor(382, 238);
				until (check == defeated or check == success);
			else
			end
		until (check == success);
	elseif check == success then
		endBoss();
	else
	end
end

-- [OK ACTUALLY RUN SHIT]

while true do
	GoToBossQuest();
	beginQuest();
	bossQuestAction();
	beginQuest();
	startBoss();
	deadBossCheck();
	endBoss();
end
